basePath: /api/v1
definitions:
  app.App:
    properties:
      argon2:
        $ref: '#/definitions/argon2.Argon2Config'
      attestation:
        $ref: '#/definitions/config.Attestation'
      certificate_authority:
        $ref: '#/definitions/ca.Config'
      config_dir:
        type: string
      debug:
        type: boolean
      debug-secrets:
        type: boolean
      domain:
        type: string
      hostmaster:
        type: string
      hostname:
        type: string
      listen:
        type: string
      log_dir:
        type: string
      platform_dir:
        type: string
      runtime_user:
        type: string
      tpm:
        $ref: '#/definitions/tpm2.Config'
      webservice:
        $ref: '#/definitions/config.WebService'
    type: object
  argon2.Argon2Config:
    properties:
      iterations:
        type: integer
      keyLen:
        type: integer
      memory:
        type: integer
      parallelism:
        type: integer
      saltLen:
        type: integer
    type: object
  ca.Config:
    properties:
      auto_import_issuing_ca:
        type: boolean
      default_idevid_cn:
        type: string
      default_validity:
        type: integer
      identity:
        items:
          $ref: '#/definitions/ca.Identity'
        type: array
      platform_ca:
        type: integer
      require-password:
        type: boolean
      sans_include_localhost:
        type: boolean
      system_cert_pool:
        type: boolean
    type: object
  ca.Identity:
    properties:
      keys:
        items:
          $ref: '#/definitions/keystore.KeyConfig'
        type: array
      keystores:
        $ref: '#/definitions/platform.KeyringConfig'
      sans:
        $ref: '#/definitions/ca.SubjectAlternativeNames'
      subject:
        $ref: '#/definitions/ca.Subject'
      valid:
        type: integer
    type: object
  ca.Subject:
    properties:
      address:
        type: string
      cn:
        type: string
      country:
        type: string
      locality:
        type: string
      organization:
        type: string
      organizational_unit:
        type: string
      postal_code:
        type: string
      province:
        type: string
    type: object
  ca.SubjectAlternativeNames:
    properties:
      dns:
        items:
          type: string
        type: array
      email:
        items:
          type: string
        type: array
      ips:
        items:
          type: string
        type: array
    type: object
  config.Attestation:
    properties:
      allow-open-enrollment:
        type: boolean
      allow_attestor_self_ca:
        type: boolean
      allowed_verifiers:
        items:
          type: string
        type: array
      insecure_port:
        type: integer
      insecure_skip_verify:
        type: boolean
      quote-pcrs:
        items:
          type: integer
        type: array
      tls_port:
        type: integer
    type: object
  config.Identity:
    properties:
      sans:
        $ref: '#/definitions/ca.SubjectAlternativeNames'
      subject:
        $ref: '#/definitions/ca.Subject'
      valid:
        type: integer
    type: object
  config.WebService:
    properties:
      certificate:
        $ref: '#/definitions/config.Identity'
      home:
        type: string
      jwt_expiration:
        type: integer
      key:
        $ref: '#/definitions/keystore.KeyConfig'
      port:
        type: integer
      tls_port:
        type: integer
    type: object
  keystore.ECCConfig:
    properties:
      curve:
        type: string
    type: object
  keystore.KeyConfig:
    properties:
      algorithm:
        type: string
      cn:
        type: string
      debug:
        type: boolean
      default:
        type: boolean
      ecc:
        $ref: '#/definitions/keystore.ECCConfig'
      hash:
        type: string
      parent:
        $ref: '#/definitions/keystore.KeyConfig'
      password:
        type: string
      platform-policy:
        type: boolean
      rsa:
        $ref: '#/definitions/keystore.RSAConfig'
      secret:
        type: string
      signature-algorithm:
        type: string
      store:
        type: string
    type: object
  keystore.RSAConfig:
    properties:
      size:
        type: integer
    type: object
  pkcs8.Config:
    properties:
      cn:
        type: string
      platform_policy:
        type: boolean
    type: object
  pkcs11.Config:
    properties:
      cn:
        type: string
      config:
        type: string
      label:
        type: string
      library:
        type: string
      pin:
        type: string
      platform_policy:
        type: boolean
      slot:
        type: integer
      so_pin:
        type: string
    type: object
  platform.KeyringConfig:
    properties:
      cn:
        type: string
      pkcs8:
        $ref: '#/definitions/pkcs8.Config'
      pkcs11:
        $ref: '#/definitions/pkcs11.Config'
      tpm2:
        $ref: '#/definitions/tpm2.KeyStoreConfig'
    type: object
  response.WebServiceResponse:
    properties:
      code:
        type: integer
      error:
        type: string
      payload: {}
      success:
        type: boolean
    type: object
  rest.JsonWebToken:
    properties:
      error:
        type: string
      token:
        type: string
    type: object
  service.UserCredentials:
    properties:
      email:
        type: string
      password:
        type: string
    type: object
  tpm2.Config:
    properties:
      device:
        type: string
      ek:
        $ref: '#/definitions/tpm2.EKConfig'
      encrypt_sessions:
        type: boolean
      entropy:
        type: boolean
      file_integrity:
        items:
          type: string
        type: array
      hash:
        type: string
      iak:
        $ref: '#/definitions/tpm2.IAKConfig'
      idevid:
        $ref: '#/definitions/tpm2.IDevIDConfig'
      keystore:
        $ref: '#/definitions/tpm2.KeyStoreConfig'
      lockout-auth:
        type: string
      platform_pcr:
        type: integer
      simulator:
        type: boolean
      ssrk:
        $ref: '#/definitions/tpm2.SRKConfig'
    type: object
  tpm2.EKConfig:
    properties:
      _platform_policy:
        type: boolean
      algorithm:
        type: string
      cert-handle:
        type: integer
      cn:
        type: string
      debug:
        type: boolean
      ecc:
        $ref: '#/definitions/keystore.ECCConfig'
      handle:
        type: integer
      hierarchy_auth:
        type: string
      password:
        type: string
      rsa:
        $ref: '#/definitions/keystore.RSAConfig'
    type: object
  tpm2.IAKConfig:
    properties:
      _platform_policy:
        type: boolean
      algorithm:
        type: string
      cert-handle:
        type: integer
      cn:
        type: string
      debug:
        type: boolean
      ecc:
        $ref: '#/definitions/keystore.ECCConfig'
      handle:
        type: integer
      hash:
        type: string
      password:
        type: string
      rsa:
        $ref: '#/definitions/keystore.RSAConfig'
      signature-algorithm:
        type: string
    type: object
  tpm2.IDevIDConfig:
    properties:
      _platform_policy:
        type: boolean
      algorithm:
        type: string
      cert-handle:
        type: integer
      cn:
        type: string
      debug:
        type: boolean
      ecc:
        $ref: '#/definitions/keystore.ECCConfig'
      handle:
        type: integer
      hash:
        type: string
      model:
        type: string
      pad:
        type: boolean
      password:
        type: string
      rsa:
        $ref: '#/definitions/keystore.RSAConfig'
      serial:
        type: string
      signature-algorithm:
        type: string
    type: object
  tpm2.KeyStoreConfig:
    properties:
      cn:
        type: string
      platform_policy:
        type: boolean
      srk-handle:
        type: integer
      srk_auth:
        type: string
    type: object
  tpm2.SRKConfig:
    properties:
      _platform_policy:
        type: boolean
      algorithm:
        type: string
      cn:
        type: string
      debug:
        type: boolean
      ecc:
        $ref: '#/definitions/keystore.ECCConfig'
      handle:
        type: integer
      hierarchy-auth:
        type: string
      password:
        type: string
      rsa:
        $ref: '#/definitions/keystore.RSAConfig'
    type: object
host: localhost:8443
info:
  contact:
    email: support@trusted-platform.io
    name: API Support
    url: https://www.trusted-platform.io/support
  description: The Trusted Platform RESTful Web Services API
  license:
    name: Commercial
    url: https://www.trusted-platform.io/licenses/commercial.txt
  termsOfService: https://www.trusted-platform.io/terms
  title: Trusted Platform
  version: v0.0.1
paths:
  /certificate:
    get:
      description: Returns the server public RSA key
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Retrieve the server x509 certificate
      tags:
      - System
  /config:
    get:
      description: Returns the server configuration
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.App'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.WebServiceResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.WebServiceResponse'
      security:
      - JWT: []
      summary: System configuration
      tags:
      - System
  /endpoints:
    get:
      description: Returns a list of REST API endpoints
      produces:
      - application/json
      responses:
        "200":
          description: OK
      summary: REST API Endpoints
      tags:
      - System
  /events/{page}:
    get:
      description: Returns a page of system event log entries
      parameters:
      - description: string valid
        in: path
        maxLength: 20
        minLength: 1
        name: page
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.WebServiceResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.WebServiceResponse'
      security:
      - JWT: []
      summary: System Event Log
      tags:
      - System
  /login:
    post:
      consumes:
      - application/json
      description: Authenticate a user and returns a new JWT
      parameters:
      - description: UserCredentials struct
        in: body
        name: UserCredentials
        required: true
        schema:
          $ref: '#/definitions/service.UserCredentials'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rest.JsonWebToken'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/rest.JsonWebToken'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/rest.JsonWebToken'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/rest.JsonWebToken'
      summary: Authenticate and obtain JWT
      tags:
      - Authentication
  /login/refresh:
    get:
      consumes:
      - application/json
      description: Returns a new JWT token with a new, extended expiration date
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/rest.JsonWebToken'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/rest.JsonWebToken'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/rest.JsonWebToken'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/rest.JsonWebToken'
      security:
      - JWT: []
      summary: Refresh JWT
      tags:
      - Authentication
  /pubkey:
    get:
      description: Returns the server public RSA key
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Retrieve the server pubilc key
      tags:
      - System
  /status:
    get:
      description: Returns current system status metrics
      produces:
      - application/json
      responses:
        "200":
          description: OK
      security:
      - JWT: []
      summary: System Status
      tags:
      - System
securityDefinitions:
  JWT:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
